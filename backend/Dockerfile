# backend/Dockerfile

FROM python:3.11-slim

# DiretÃ³rio de trabalho dentro do container
WORKDIR /app

# ðŸ‘‰ Repara: agora uso backend/requirements.txt,
# porque o build context Ã© o raiz do repo.
COPY backend/requirements.txt .

RUN pip install --no-cache-dir -r requirements.txt

# Copia todo o backend pra dentro do container
COPY backend .

# Porta que o Railway injeta via variÃ¡vel PORT
ENV PORT=8000
ENV PYTHONUNBUFFERED=1

CMD ["sh", "-c", "uvicorn main:app --host 0.0.0.0 --port ${PORT:-8000}"]
